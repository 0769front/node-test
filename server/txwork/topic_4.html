<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>题目4</title>
    <style>p{text-align: center;}</style>
</head>
<body>
<p>
    <input type="text" id="source" value="300"/>
</p>
<p id="result">-</p>
<p>
    <button id="toy">转换成元</button>
    <button id="tof">转换成分</button>
</p>

<script>
    var input = document.getElementById("source");
    var result = document.getElementById("result");
    var toy = document.getElementById("toy");
    var tof = document.getElementById("tof");
    var REG = /^[\.\d]+$/;

    if(!('trim' in String)){
        String.prototype.trim = function(){
            return this.replace(/^\s+|\s+$/g , '');
        }
    }

    toy.onclick = function(){
        if(REG.test(input.value.trim())){
            result.innerHTML = myParser(input.value , true)
        }else {
            result.innerHTML = "请输入数字";
        }
    };
    tof.onclick = function(){
        if(REG.test(input.value.trim())){
            result.innerHTML = myParser(input.value , false)
        }else {
            result.innerHTML = "请输入数字";
        }
    };

    function myParser(m , tod){
        if(tod){
            m = m/100 + "";
            var a = m.split(".");
            var f = "." + (a.length > 1 ? ((a[1].length == 1) ? a[1]+"0" : a[1]) : "00");
            return a[0] + f;
        }else {
            return +m * 100;
        }
    }
</script>
</body>
</html>